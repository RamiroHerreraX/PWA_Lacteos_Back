openapi: 3.0.0
info:
  title: ğŸ¯ PWA Lacteos - API Documentation & Testing Matrix
  description: |
    # Sistema de GestiÃ³n de Usuarios con AutenticaciÃ³n 2FA
    
    ## ğŸ“‹ Matriz de Pruebas Integrada
    
    ## â±ï¸ Tiempos de EjecuciÃ³n Esperados:
    - **RÃ¡pido (< 500ms)**: Operaciones simples sin external calls
    - **Medio (500ms - 2s)**: Operaciones con BD o emails
    - **Lento (2s - 5s)**: Operaciones con geolocalizaciÃ³n o mÃºltiples procesos
    
    ### Funcionalidades a probar:
    - âœ… AutenticaciÃ³n con verificaciÃ³n en dos factores (2FA)
    - âœ… RecuperaciÃ³n de usuario y contraseÃ±a por roles
    - âœ… GestiÃ³n de usuarios (Admin, Editor, Lector)
    - âœ… ValidaciÃ³n de seguridad y roles
    - âœ… GeolocalizaciÃ³n de sesiones
    - âœ… Historial de actividad
    
    ### Usuarios de prueba:
    - **Admin**: admin@mail.com / Admin123!
    - **Editor**: editor@mail.com / Editor123!  
    - **Lector**: lector@mail.com / Lector123!
    
    ### CÃ³digos de Error:
    - **200**: OperaciÃ³n exitosa
    - **201**: Recurso creado exitosamente
    - **400**: Datos invÃ¡lidos o faltantes
    - **401**: Token requerido o invÃ¡lido
    - **403**: Permisos insuficientes
    - **404**: Recurso no encontrado
    - **500**: Error interno del servidor
    
  version: 1.0.0
  contact:
    name: Equipo de Desarrollo
    email: desarrollo@lacteos.com

servers:
  - url: http://localhost:3000/api
    description: ğŸ§ª Servidor de Desarrollo y Pruebas

# ğŸ” SEGURIDAD GLOBAL - Todos los endpoints requieren autenticaciÃ³n por defecto
security:
  - bearerAuth: []

tags:
  - name: 1ï¸âƒ£ AutenticaciÃ³n 2FA
    description: Pruebas de login y verificaciÃ³n en dos factores
  - name: 2ï¸âƒ£ RecuperaciÃ³n de Acceso
    description: Pruebas de recuperaciÃ³n por roles (HU-02)
  - name: 3ï¸âƒ£ GestiÃ³n de Usuarios
    description: Pruebas CRUD segÃºn roles de usuario
  - name: 4ï¸âƒ£ Sesiones y GeolocalizaciÃ³n
    description: Pruebas de historial y ubicaciÃ³n
  - name: ğŸ§ª Casos de Error
    description: ValidaciÃ³n de manejo de errores

paths:
  # ==================== 1ï¸âƒ£ AUTENTICACIÃ“N 2FA ====================
  /login:
    post:
      security: []  # ğŸ”“ ENDPOINT PÃšBLICO - Sin candado
      tags: [1ï¸âƒ£ AutenticaciÃ³n 2FA]
      summary: TC-AUTH-001 - Login con credenciales vÃ¡lidas + 2FA
      description: |
        **â±ï¸ Tiempo esperado:** 800ms - 1.5s (incluye generaciÃ³n OTP y envÃ­o de email)
        
        **Caso de prueba:** AutenticaciÃ³n exitosa con verificaciÃ³n en dos factores
        
        **Validaciones a probar:**
        - Email formato vÃ¡lido
        - ContraseÃ±a no vacÃ­a
        - Usuario existe en BD
        - ContraseÃ±a coincide con hash
        - GeneraciÃ³n de OTP
        - EnvÃ­o de email (online/offline)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, password]
              properties:
                email:
                  type: string
                  format: email
                  example: "admin@mail.com"
                  description: "Email registrado en el sistema"
                password:
                  type: string
                  example: "Admin123!"
                  description: "ContraseÃ±a del usuario"
            examples:
              admin_login:
                summary: "Login Administrador"
                value:
                  email: "admin@mail.com"
                  password: "Admin123!"
              editor_login:
                summary: "Login Editor"
                value:
                  email: "editor@mail.com"
                  password: "Editor123!"
              invalid_email:
                summary: "Email no registrado (Error)"
                value:
                  email: "noexiste@mail.com"
                  password: "Admin123!"
              wrong_password:
                summary: "ContraseÃ±a incorrecta (Error)"
                value:
                  email: "admin@mail.com"
                  password: "WrongPassword123!"
      responses:
        '200':
          description: âœ… Ã‰XITO - CÃ³digo 2FA enviado al correo
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "CÃ³digo 2FA enviado al correo"
                  otp:
                    type: string
                    description: "Solo en modo offline"
                    example: "123456"
                  executionTime:
                    type: number
                    description: "Tiempo de ejecuciÃ³n en milisegundos"
                    example: 1250
        '400':
          description: âŒ ERROR - Credenciales incorrectas
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                usuario_no_encontrado:
                  value:
                    msg: "Usuario no encontrado"
                    executionTime: 45
                password_incorrecto:
                  value:
                    msg: "ContraseÃ±a incorrecta"
                    executionTime: 120
        '500':
          description: âš ï¸ ERROR - Problema en el servidor

  /verificar-otp:
    post:
      security: []  # ğŸ”“ ENDPOINT PÃšBLICO - Sin candado
      tags: [1ï¸âƒ£ AutenticaciÃ³n 2FA]
      summary: TC-AUTH-004 - Verificar cÃ³digo OTP + GeolocalizaciÃ³n
      description: |
        **â±ï¸ Tiempo esperado:** 1.5s - 3s (incluye consulta geolocalizaciÃ³n IP)
        
        **Validaciones a probar:**
        - OTP correcto
        - OTP no expirado (<5min)
        - GeneraciÃ³n de JWT token
        - Registro de sesiÃ³n con IP
        - ObtenciÃ³n de geolocalizaciÃ³n
        - ActualizaciÃ³n actividad usuario
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, otp]
              properties:
                email:
                  type: string
                  example: "admin@mail.com"
                otp:
                  type: string
                  example: "123456"
                  description: "CÃ³digo recibido por correo"
            examples:
              otp_valido:
                summary: "OTP VÃ¡lido"
                value:
                  email: "admin@mail.com"
                  otp: "123456"
              otp_incorrecto:
                summary: "OTP Incorrecto (Error)"
                value:
                  email: "admin@mail.com"
                  otp: "000000"
              otp_expirado:
                summary: "OTP Expirado (Error)"
                value:
                  email: "admin@mail.com"
                  otp: "999999"
      responses:
        '200':
          description: âœ… Ã‰XITO - AutenticaciÃ³n completada
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: "JWT token vÃ¡lido por 1 hora"
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  rol:
                    type: string
                    enum: [admin, editor, lector]
                    example: "admin"
                  ubicacion:
                    type: object
                    properties:
                      ip:
                        type: string
                        example: "189.204.0.0"
                      country:
                        type: string
                        example: "MX"
                      region:
                        type: string
                        example: "CMX"
                      city:
                        type: string
                        example: "Ciudad de MÃ©xico"
                      ll:
                        type: array
                        items:
                          type: number
                        example: [19.42847, -99.12766]
                      timezone:
                        type: string
                        example: "America/Mexico_City"
                  executionTime:
                    type: number
                    description: "Tiempo total de ejecuciÃ³n en ms"
                    example: 2150
        '400':
          description: âŒ ERROR - OTP incorrecto o expirado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                otp_incorrecto:
                  value:
                    msg: "OTP incorrecto"
                    executionTime: 80
                otp_expirado:
                  value:
                    msg: "OTP expirado"
                    executionTime: 95
                otp_no_generado:
                  value:
                    msg: "OTP no generado"
                    executionTime: 60

  # ==================== 2ï¸âƒ£ RECUPERACIÃ“N DE ACCESO ====================
  /reset/usuario:
    post:
      security: []  # ğŸ”“ ENDPOINT PÃšBLICO - Sin candado
      tags: [2ï¸âƒ£ RecuperaciÃ³n de Acceso]
      summary: TC-REC-001 - Recuperar nombre de usuario
      description: |
        **â±ï¸ Tiempo esperado:** 300ms - 800ms (bÃºsqueda en BD + envÃ­o email)
        
        **Validaciones a probar:**
        - Email existe en sistema
        - EnvÃ­o de correo (online/offline)
        - Mensaje de confirmaciÃ³n
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email]
              properties:
                email:
                  type: string
                  format: email
                  example: "admin@mail.com"
            examples:
              email_valido:
                summary: "Email registrado"
                value:
                  email: "admin@mail.com"
              email_no_registrado:
                summary: "Email no registrado (Error)"
                value:
                  email: "noexiste@mail.com"
      responses:
        '200':
          description: âœ… Ã‰XITO - Usuario enviado al correo
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "Tu nombre de usuario fue enviado al correo"
                  usuario:
                    type: string
                    description: "Solo en modo offline"
                    example: "Admin User"
                  executionTime:
                    type: number
                    example: 450
        '404':
          description: âŒ ERROR - Correo no registrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                msg: "Correo no registrado"
                executionTime: 120

  /reset/enviar:
    post:
      security: []  # ğŸ”“ ENDPOINT PÃšBLICO - Sin candado
      tags: [2ï¸âƒ£ RecuperaciÃ³n de Acceso]
      summary: TC-REC-003/004 - Solicitar recuperaciÃ³n de contraseÃ±a
      description: |
        **â±ï¸ Tiempo esperado:** 
        - Admin: 800ms - 1.5s (generaciÃ³n OTP + email)
        - Otros roles: 500ms - 1s (generaciÃ³n enlace)
        
        **Comportamiento por rol:**
        - **Admin**: EnvÃ­a OTP con token (2FA)
        - **Editor/Lector**: EnvÃ­a enlace directo
        
        **Validaciones a probar:**
        - Usuario existe
        - GeneraciÃ³n de token Ãºnico
        - DiferenciaciÃ³n por rol
        - Tiempo de expiraciÃ³n (5min admin, 15min otros)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email]
              properties:
                email:
                  type: string
                  format: email
                  example: "admin@mail.com"
            examples:
              admin_reset:
                summary: "Reset Admin (requiere OTP)"
                value:
                  email: "admin@mail.com"
              editor_reset:
                summary: "Reset Editor (enlace directo)"
                value:
                  email: "editor@mail.com"
      responses:
        '200':
          description: âœ… Ã‰XITO - Proceso iniciado segÃºn rol
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "OTP enviado al correo"
                  token:
                    type: string
                    description: "Token para verificaciÃ³n OTP"
                    example: "abc123def456"
                  otp:
                    type: string
                    description: "Solo en modo offline para admin"
                    example: "123456"
                  resetUrl:
                    type: string
                    description: "Solo para roles no admin"
                    example: "http://localhost:4200/reset/abc123def456"
                  executionTime:
                    type: number
                    example: 1100
        '404':
          description: âŒ ERROR - Email no registrado
          content:
            application/json:
              example:
                msg: "Email no registrado"
                executionTime: 85

  /reset/verificar-otp:
    post:
      security: []  # ğŸ”“ ENDPOINT PÃšBLICO - Sin candado
      tags: [2ï¸âƒ£ RecuperaciÃ³n de Acceso]
      summary: TC-REC-005 - Verificar OTP para administradores
      description: |
        **â±ï¸ Tiempo esperado:** 200ms - 500ms (validaciÃ³n rÃ¡pida)
        
        **Solo para usuarios Admin**
        
        **Validaciones a probar:**
        - Token vÃ¡lido
        - Email coincide con token
        - OTP correcto
        - No expirado (<5min)
        - GeneraciÃ³n de token final para reset
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, otp, token]
              properties:
                email:
                  type: string
                  format: email
                  example: "admin@mail.com"
                otp:
                  type: string
                  example: "123456"
                  description: "CÃ³digo recibido por correo"
                token:
                  type: string
                  example: "abc123def456"
                  description: "Token recibido en paso anterior"
      responses:
        '200':
          description: âœ… Ã‰XITO - OTP verificado, enlace enviado
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "OTP verificado correctamente. Usa este enlace para restablecer la contraseÃ±a"
                  resetToken:
                    type: string
                    example: "xyz789abc123"
                  resetUrl:
                    type: string
                    example: "http://localhost:4200/reset/xyz789abc123"
                  executionTime:
                    type: number
                    example: 320
        '400':
          description: âŒ ERROR - OTP incorrecto o expirado
          content:
            application/json:
              example:
                msg: "OTP incorrecto"
                executionTime: 150

  /reset/{token}:
    post:
      security: []  # ğŸ”“ ENDPOINT PÃšBLICO - Sin candado
      tags: [2ï¸âƒ£ RecuperaciÃ³n de Acceso]
      summary: TC-REC-006 - Restablecer contraseÃ±a final
      description: |
        **â±ï¸ Tiempo esperado:** 400ms - 900ms (hash de contraseÃ±a + actualizaciÃ³n BD)
        
        **Endpoint faltante en tu Swagger original**
        
        **Validaciones a probar:**
        - Token vÃ¡lido y no expirado
        - ContraseÃ±a cumple requisitos
        - Hash y actualizaciÃ³n en BD
        - Limpieza de token usado
      parameters:
        - name: token
          in: path
          required: true
          schema:
            type: string
          example: "abc123def456"
          description: "Token de recuperaciÃ³n"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [newPassword]
              properties:
                newPassword:
                  type: string
                  example: "NewPassword123!"
                  description: "Nueva contraseÃ±a (min 8 chars, mayÃºs, minÃºs, nÃºmero, especial)"
            examples:
              password_valido:
                summary: "ContraseÃ±a vÃ¡lida"
                value:
                  newPassword: "NewPassword123!"
              password_debil:
                summary: "ContraseÃ±a dÃ©bil (Error)"
                value:
                  newPassword: "123"
      responses:
        '200':
          description: âœ… Ã‰XITO - ContraseÃ±a actualizada
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "ContraseÃ±a actualizada correctamente"
                  executionTime:
                    type: number
                    example: 650
        '400':
          description: âŒ ERROR - Token invÃ¡lido o expirado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                token_invalido:
                  value:
                    msg: "Token invÃ¡lido"
                    executionTime: 90
                token_expirado:
                  value:
                    msg: "Token expirado"
                    executionTime: 110

  # ==================== 3ï¸âƒ£ GESTIÃ“N DE USUARIOS ====================
  /usuario:
    get:
      # ğŸ”’ ENDPOINT PROTEGIDO - Hereda seguridad global (con candado)
      tags: [3ï¸âƒ£ GestiÃ³n de Usuarios]
      summary: TC-USR-001 - Listar todos los usuarios
      description: |
        **â±ï¸ Tiempo esperado:** 100ms - 300ms (consulta simple a BD)
        
        **âš ï¸ PUNTO DE MEJORA:** Este endpoint deberÃ­a requerir autenticaciÃ³n
        
        **Validaciones a probar:**
        - Respuesta con lista de usuarios
        - Campos incluidos/excluidos (no mostrar passwords)
        - Manejo de BD vacÃ­a
        - Orden de resultados
      responses:
        '200':
          description: âœ… Ã‰XITO - Lista de usuarios obtenida
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Usuario'
              example:
                - id: 1
                  nombre: "Administrador Principal"
                  email: "admin@mail.com"
                  rol: "admin"
                  creado_en: "2024-01-15T10:30:00Z"
                  executionTime: 180
        '404':
          description: âŒ No se encontraron usuarios
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                error: "No se encontraron usuarios"
                executionTime: 95
        '500':
          description: âŒ ERROR - Problema en el servidor

  /usuario/nuevo:
    post:
      # ğŸ”’ ENDPOINT PROTEGIDO - Hereda seguridad global (con candado)
      tags: [3ï¸âƒ£ GestiÃ³n de Usuarios]
      summary: TC-USR-004 - Crear nuevo usuario
      description: |
        **â±ï¸ Tiempo esperado:** 600ms - 1.2s (validaciones + hash password + inserciÃ³n BD)
        
        **âš ï¸ PUNTO DE MEJORA:** Solo administradores deberÃ­an poder crear usuarios
        
        **Validaciones a probar:**
        - Todos los campos requeridos
        - Email formato vÃ¡lido y Ãºnico
        - ContraseÃ±a cumple requisitos de seguridad
        - Rol vÃ¡lido (admin, editor, lector)
        - Hash de contraseÃ±a
        - InserciÃ³n en BD y cache offline
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [nombre, email, password, rol]
              properties:
                nombre:
                  type: string
                  example: "Juan PÃ©rez"
                  description: "Nombre completo del usuario"
                email:
                  type: string
                  format: email
                  example: "nuevo@mail.com"
                  description: "Email Ãºnico en el sistema"
                password:
                  type: string
                  example: "NuevaPass123!"
                  description: "Min 8 chars, mayÃºscula, minÃºscula, nÃºmero, especial"
                rol:
                  type: string
                  enum: [admin, editor, lector]
                  example: "lector"
                  description: "Rol del usuario en el sistema"
            examples:
              usuario_valido:
                summary: "Usuario vÃ¡lido completo"
                value:
                  nombre: "Juan PÃ©rez"
                  email: "nuevo@mail.com"
                  password: "NuevaPass123!"
                  rol: "lector"
              email_duplicado:
                summary: "Email duplicado (Error)"
                value:
                  nombre: "Test User"
                  email: "admin@mail.com"
                  password: "Test123!"
                  rol: "editor"
              password_debil:
                summary: "ContraseÃ±a dÃ©bil (Error)"
                value:
                  nombre: "Test User"
                  email: "test@mail.com"
                  password: "123"
                  rol: "lector"
              rol_invalido:
                summary: "Rol invÃ¡lido (Error)"
                value:
                  nombre: "Test User"
                  email: "test@mail.com"
                  password: "Test123!"
                  rol: "superuser"
      responses:
        '201':
          description: âœ… Ã‰XITO - Usuario creado exitosamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Usuario'
              example:
                id: 15
                nombre: "Juan PÃ©rez"
                email: "nuevo@mail.com"
                rol: "lector"
                creado_en: "2024-01-15T10:30:00Z"
                executionTime: 850
        '400':
          description: âŒ ERROR - ValidaciÃ³n fallida
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                msg: "El email ya estÃ¡ registrado"
                executionTime: 220
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  # ==================== 4ï¸âƒ£ SESIONES Y GEOLOCALIZACIÃ“N ====================
  /sesiones:
    get:
      # ğŸ”’ ENDPOINT PROTEGIDO - Hereda seguridad global (con candado)
      tags: [4ï¸âƒ£ Sesiones y GeolocalizaciÃ³n]
      summary: TC-SES-001 - Obtener historial de sesiones
      description: |
        **â±ï¸ Tiempo esperado:** 150ms - 400ms (consulta con join a tabla sesiones)
        
        **Endpoint protegido que requiere autenticaciÃ³n JWT**
        
        **Validaciones a probar:**
        - Token JWT vÃ¡lido
        - Usuario autenticado
        - Historial ordenado por fecha descendente
        - Campos de ubicaciÃ³n incluidos
      responses:
        '200':
          description: âœ… Ã‰XITO - Historial de sesiones obtenido
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Sesion'
              example:
                - id: 1
                  usuario_id: 1
                  ip: "189.204.0.0"
                  ubicacion:
                    country: "MX"
                    region: "CMX"
                    city: "Ciudad de MÃ©xico"
                    ll: [19.42847, -99.12766]
                  fecha: "2024-01-15T10:30:00Z"
                  executionTime: 280
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          description: âŒ No hay historial de sesiones
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                msg: "No hay historial de sesiones"
                executionTime: 120

components:
  schemas:
    Usuario:
      type: object
      properties:
        id:
          type: integer
          example: 1
        nombre:
          type: string
          example: "Administrador Principal"
        email:
          type: string
          format: email
          example: "admin@mail.com"
        rol:
          type: string
          enum: [admin, editor, lector]
          example: "admin"
        creado_en:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00Z"
        executionTime:
          type: number
          description: "Tiempo de ejecuciÃ³n en milisegundos"
          example: 150
      required: [id, nombre, email, rol]
    
    ErrorResponse:
      type: object
      properties:
        msg:
          type: string
          example: "Mensaje de error descriptivo"
        error:
          type: string
          example: "Detalle tÃ©cnico del error"
        timestamp:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00Z"
        executionTime:
          type: number
          description: "Tiempo de ejecuciÃ³n en milisegundos"
          example: 85
    
    Sesion:
      type: object
      properties:
        id:
          type: integer
          example: 1
        usuario_id:
          type: integer
          example: 1
        ip:
          type: string
          example: "189.204.0.0"
        ubicacion:
          type: object
          properties:
            country:
              type: string
              example: "MX"
            region:
              type: string
              example: "CMX"
            city:
              type: string
              example: "Ciudad de MÃ©xico"
            ll:
              type: array
              items:
                type: number
              example: [19.42847, -99.12766]
        fecha:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00Z"
        executionTime:
          type: number
          example: 250
    
    Ubicacion:
      type: object
      properties:
        ip:
          type: string
          example: "189.204.0.0"
        country:
          type: string
          example: "MX"
        region:
          type: string
          example: "CMX"
        city:
          type: string
          example: "Ciudad de MÃ©xico"
        ll:
          type: array
          items:
            type: number
          example: [19.42847, -99.12766]
        timezone:
          type: string
          example: "America/Mexico_City"

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: "Ingresa el token JWT obtenido en /verificar-otp"

  responses:
    UnauthorizedError:
      description: Token de acceso faltante o invÃ¡lido
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            msg: "Token requerido o invÃ¡lido"
            executionTime: 25
    
    ForbiddenError:
      description: Permisos insuficientes para la operaciÃ³n
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            msg: "Permisos insuficientes para esta acciÃ³n"
            executionTime: 30
    
    ValidationError:
      description: Error de validaciÃ³n en los datos enviados
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            msg: "Datos de entrada invÃ¡lidos"
            error: "El campo 'email' debe ser una direcciÃ³n de correo vÃ¡lida"

  parameters:
    AuthorizationHeader:
      name: Authorization
      in: header
      required: true
      description: Token JWT en formato Bearer
      schema:
        type: string
        example: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
    
    UserIdPath:
      name: id
      in: path
      required: true
      description: ID del usuario
      schema:
        type: integer
        example: 1
    
    EmailQuery:
      name: email
      in: query
      required: false
      description: Filtrar por email
      schema:
        type: string
        format: email
        example: "admin@mail.com"